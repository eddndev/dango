---
interface Props {
    videoSrc?: string | null;
    backgroundImage?: string;
    overlay?: boolean;
    overlayOpacity?: number;
}

const {
    videoSrc = null,
    backgroundImage = "/images/ui/Fondo.webp",
    overlay = true,
    overlayOpacity = 0.5
} = Astro.props;

// Simple check to see if it's a local file or external URL if we add youtube support later
const videoType = videoSrc ? 'local' : 'none';
---

<div class="video-background">
    {
        videoSrc ? (
            <video autoplay muted loop playsinline class="video-bg">
                <source src={videoSrc} type="video/mp4" />
                Tu navegador no soporta el elemento de video.
            </video>
        ) : (
            <div
                class="video-bg bg-cover bg-center"
                style={`background-image: url(${backgroundImage})`}
            />
        )
    }

    {
        overlay && (
            <div class="video-overlay" style={`opacity: ${overlayOpacity}`} />
        )
    }

    <div class="video-content">
        <slot />
    </div>
</div>

<style>
    .video-background {
        position: relative;
        width: 100%;
        height: 100dvh;
        overflow: hidden;
    }

    .video-bg {
        position: absolute;
        top: 50%;
        left: 50%;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        transform: translate(-50%, -50%);
        object-fit: cover;
        z-index: 0;
    }

    .video-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: black; /* Base negra para el overlay */
        z-index: 1;
        pointer-events: none;
    }

    .video-content {
        position: relative;
        z-index: 2;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
</style>