---
interface Props {
    videoSrc?: string;
    videoType?: "local" | "youtube" | "vimeo";
    overlay?: boolean;
    overlayOpacity?: number;
}

const {
    videoSrc = "/videos/dango-bg.mp4",
    videoType = "local",
    overlay = true,
    overlayOpacity = 0.4,
} = Astro.props;
---

<div class="video-background">
    {
        videoType === "local" && (
            <video autoplay muted loop playsinline class="video-bg">
                <source src={videoSrc} type="video/mp4" />
                Tu navegador no soporta el elemento de video.
            </video>
        )
    }

    {
        overlay && (
            <div class="video-overlay" style={`opacity: ${overlayOpacity}`} />
        )
    }

    <div class="video-content">
        <slot />
    </div>
</div>

<style>
    .video-background {
        position: relative;
        width: 100%;
        height: 100dvh;
        overflow: hidden;
    }

    .video-bg {
        position: absolute;
        top: 50%;
        left: 50%;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        transform: translate(-50%, -50%);
        object-fit: cover;
        z-index: 0;
    }

    .video-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
            to bottom,
            rgba(0, 0, 0, 0.3),
            rgba(0, 0, 0, 0.7)
        );
        z-index: 1;
    }

    .video-content {
        position: relative;
        z-index: 2;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
</style>
